;(function(e){e.fn.gallerify=function(t){return this.each(function(){var n=e(this);t=t||n.data();var r={width:560,circular:!1,timer:5e3},s=e.extend({},r,t),o,u=s.width,f=s.width*9/16;n.width(u),n.height(f);var l=function(){var t=e("<div class='t_slideshow'></div").html(n.html()).height(f/6+20).appendTo(n),r=0,l=0,c=t.children("ul").addClass("t_reel").height((u-80)/5*9/16+20),h=c.children("li").addClass("t_frame").width((u-80)/5).height((u-80)/5*9/16),p=h.children("img").addClass("t_photo").width((u-80)/5).height((u-80)/5*9/16),v=n.children("ul").addClass("reel"),m=v.children("li").addClass("frame"),y=m.children("img").addClass("photo"),b=m.size(),w=b;for(i=0;i<b;i++){var E=Math.floor(Math.random()*w);m.filter(":eq("+E+")").appendTo(v),h.filter(":eq("+E+")").appendTo(c),w--}h=c.children("li").click(function(){var e=h.removeClass("active").filter(this).addClass("active").index();r=e,x(5)}).hover(function(){e(this).css("opacity",1)},function(){e(this).css("opacity",.5)}),h.css({"margin-top":f/35+"px","margin-right":"5px"}).filter(function(e){return e%5==0}).css({"margin-left":"20px"}).filter(":first").addClass("active"),h.filter(function(e){return e%5==4}).css({"margin-right":"20px"}),n.hover(function(){n.children(".t_slideshow").fadeIn("fast"),e(".nav").css("z-index",1),h.css("opacity",.5),clearInterval(o)},function(){S(),e(".nav").css("z-index",-1),n.children(".t_slideshow").fadeOut("fast")});var S=function(){o=setInterval(function(){if(r==b-1&&!s.circular)return!1;T(1),r++,x(5)},s.timer)};y.each(function(t){e(this).imagesLoaded(function(){var r=e(this).width()/u,i=e(this).height()/r;e(this).css({width:u+"px",height:i+"px","margin-top":(f-i)/2+"px"});var s=e(this).attr("alt");e("<div class='caption'>"+s+"</div>").css("top",f-25).insertBefore(e(this)),t==b-1&&($loader.hide(),n.css("visibility","visible"))})}),function(e){function t(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="wheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),(e.event.dispatch||e.event.handle).apply(this,r)}var n=["DOMMouseScroll","wheel"];if(e.event.fixHooks)for(var r=n.length;r;)e.event.fixHooks[n[--r]]=e.event.mouseHooks;e.event.special.wheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onwheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onwheel=null}},e.fn.extend({wheel:function(e){return e?this.bind("wheel",e):this.trigger("wheel")},unwheel:function(e){return this.unbind("wheel",e)}})}(jQuery),v.wheel(function(t,n){if(n<0){if(!s.circular&&r==b-1)return!1;e(".ra_nav").click()}else{if(!s.circular&&r==0)return!1;e(".la_nav").click()}}),c.wheel(function(t,n){if(n<0){if(!s.circular&&l==parseInt(b/5))return!1;e(".r_nav").click()}else{if(!s.circular&&l==0)return!1;e(".l_nav").click()}});var x=function(t){h.removeClass("active").filter(":eq("+r+")").addClass("active"),t==0||t==1||t==5?v.animate({left:r*-u+"px"},500):(t==2||t==3)&&c.animate({left:l*-u+"px"},500),s.circular||(t==0?(e(".la_nav").toggle(r!=0),e(".ra_nav").show()):t==1?(e(".ra_nav").toggle(r!=b-1),e(".la_nav").show()):t==2?(e(".l_nav").toggle(l!=0),e(".r_nav").show()):t==3?(e(".r_nav").toggle(l!=parseInt(b/5)),e(".l_nav").show()):(e(".ra_nav").toggle(r!=b-1),e(".la_nav").toggle(r!=0)))},T=function(e){s.circular&&(e==0?r=r==0?b:r:e==1?r=r==b-1?-1:r:e==2?l=l==0?parseInt(b/5)+1:l:l=l==parseInt(b/5)?-1:l)};e("<a class='nav l_nav'></a>").appendTo(n).click(function(){T(2),l--,x(2)}).toggle(s.circular).css("bottom",((u-80)/5*9/16+20)/2-7),e("<a class='nav r_nav'></a>").appendTo(n).click(function(){T(3),l++,x(3)}).toggle(b>5).css("bottom",((u-80)/5*9/16+20)/2-7),e(".la_nav").click(function(){T(0),r--,x(0)}).toggle(s.circular),e(".ra_nav").click(function(){T(1),r++,x(1)}).toggle(b>1),S()};n.css("visibility","hidden"),$loader=e("<img id='loader' src='" + NarnooSliderParams.gallerifyImagesUrl + "loader.gif' alt='loading...' />").appendTo(n).css({"z-index":99999,visibility:"visible",position:"absolute",top:f/2+"px",left:u/2+"px"}),l()})}})(jQuery);